<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Prospectors Price Tracker (Grandland)</title>
  <script src="https://cdn.jsdelivr.net/npm/react@17/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-50 text-gray-800">
  <div id="root"></div>

  <script type="text/babel">
    const RESOURCE_NAMES = {
      2:'Wood',3:'Stone',4:'Coal',5:'Clay',6:'Iron Ore',7:'Stone Block',
      8:'Stone Plate',9:'Wood Beam',10:'Wood Board',11:'Wood Girder',12:'Clay Brick',
      13:'Clay Tile',14:'Steel Block',15:'Iron Plate',16:'Nails',17:'Shovel',
      18:'Spade',19:'Pickax',20:'Hammer',21:'Sledgehammer',22:'Axe',23:'Saw',
      24:'Gold Pan',25:'Cart',26:'Cart Body',28:'Wagon',31:'Coffee Beans',
      32:'Chisel',33:'Pan',34:'Spoon',35:'Basket',36:'Kettle',37:'Rake',
      38:'Nail Puller',39:'Plane Tool',40:'Stone Rubble',41:'Steel Plate',
      42:'Iron Rail',43:'Tie Cotter',44:'Rail Tie',45:'Trolley',48:'Roasted Coffee',
      49:'Mug',50:'Mug Of Coffee',52:'Moss',53:'Garden Knife',54:'Horse',55:'Donkey'
    };

    const ChevronRight = () => (
      <svg className="w-4 h-4 inline" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" d="M9 5l7 7-7 7" />
      </svg>
    );
    const ChevronDown = () => (
      <svg className="w-4 h-4 inline" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" d="M19 9l-7 7-7-7" />
      </svg>
    );

    const PriceTable = ({
      sortedPrices, onSort, sortConfig, previousPrices,
      listingsMap, expandedIds, toggleExpand
    }) => {
      const [listingSort, setListingSort] = React.useState({ key: 'price', direction: 'asc' });
      const toggleListingSort = key => {
        setListingSort(prev => ({
          key,
          direction: prev.key === key && prev.direction === 'asc' ? 'desc' : 'asc'
        }));
      };

      const cols = ['resource','average','totalAmount','count','min','max','delta'];
      const labels = {
        resource:    'Resource',
        average:     'Avg Price',
        totalAmount: 'Total Amount',
        count:       'Listings',
        min:         'Min',
        max:         'Max',
        delta:       'Î” Price'
      };

      return (
        <div className="overflow-x-auto bg-white rounded-xl shadow-lg border border-gray-100 animate__animated animate__fadeIn">
          <table className="min-w-full divide-y divide-gray-200">
            <thead className="bg-gradient-to-r from-blue-600 to-indigo-600">
              <tr>
                <th className="px-6 py-3"></th>
                {cols.map(key => (
                  <th
                    key={key}
                    className="px-6 py-3 text-left text-xs font-semibold text-white uppercase tracking-wider cursor-pointer select-none hover:bg-blue-700 transition-colors"
                    onClick={() => key !== 'delta' && onSort(key)}
                  >
                    <div className="flex items-center">
                      {labels[key]}
                      {sortConfig.key === key && (
                        <span className="ml-1">
                          {sortConfig.direction === 'asc' ? 'â†‘' : 'â†“'}
                        </span>
                      )}
                    </div>
                  </th>
                ))}
              </tr>
            </thead>
            <tbody className="divide-y divide-gray-100">
              {sortedPrices.map(([typeId, stats], idx) => {
                const prev = previousPrices[typeId];
                const delta = prev != null
                  ? (stats.average - prev).toFixed(2)
                  : 'â€”';
                const isOpen = expandedIds.has(typeId);
                const listings = listingsMap[typeId] || [];
                const sortedListings = [...listings].sort((a, b) => {
                  const A = parseFloat(a[listingSort.key]);
                  const B = parseFloat(b[listingSort.key]);
                  return listingSort.direction === 'asc' ? A - B : B - A;
                });

                return (
                  <React.Fragment key={typeId}>
                    <tr className={`${idx%2===0?'bg-white':'bg-gray-50'} hover:bg-blue-50 transition-colors`}>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <button 
                          onClick={() => toggleExpand(typeId)} 
                          className="focus:outline-none text-blue-600 hover:text-blue-800 transition-colors"
                        >
                          {isOpen ? <ChevronDown/> : <ChevronRight/>}
                        </button>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap font-medium text-blue-800">
                        <div className="flex items-center">
                          <div className="flex-shrink-0 h-8 w-8 rounded-md bg-blue-100 flex items-center justify-center mr-3">
                            <span className="text-blue-600 font-bold text-xs">{typeId}</span>
                          </div>
                          <div>{RESOURCE_NAMES[typeId]||'Unknown'}</div>
                        </div>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap font-medium">{stats.average}</td>
                      <td className="px-6 py-4 whitespace-nowrap">{stats.totalAmount}</td>
                      <td className="px-6 py-4 whitespace-nowrap">{stats.count}</td>
                      <td className="px-6 py-4 whitespace-nowrap">{stats.min}</td>
                      <td className="px-6 py-4 whitespace-nowrap">{stats.max}</td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${
                          delta > 0 ? 'bg-green-100 text-green-800' : 
                          delta < 0 ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'
                        }`}>
                          {delta}
                          {delta > 0 ? (
                            <svg className="ml-1 w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                              <path fillRule="evenodd" d="M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z" clipRule="evenodd" />
                            </svg>
                          ) : delta < 0 ? (
                            <svg className="ml-1 w-3 h-3" fill="currentColor" viewBox="0 0 20 20">
                              <path fillRule="evenodd" d="M14.707 10.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 12.586V5a1 1 0 012 0v7.586l2.293-2.293a1 1 0 011.414 0z" clipRule="evenodd" />
                            </svg>
                          ) : null}
                        </span>
                      </td>
                    </tr>
                    {isOpen && (
                      <tr className="bg-blue-50 animate__animated animate__fadeIn">
                        <td colSpan={cols.length + 1} className="px-4 py-2">
                          <div className="border border-blue-200 rounded-lg overflow-hidden">
                            <table className="min-w-full text-sm">
                              <thead className="bg-gradient-to-r from-blue-500 to-blue-600">
                                <tr>
                                  <th
                                    className="px-4 py-2 text-left font-semibold text-white cursor-pointer hover:bg-blue-700 transition-colors"
                                    onClick={() => toggleListingSort('price')}
                                  >
                                    <div className="flex items-center">
                                      Price 
                                      {listingSort.key==='price' && (
                                        <span className="ml-1">
                                          {listingSort.direction==='asc'?'â†‘':'â†“'}
                                        </span>
                                      )}
                                    </div>
                                  </th>
                                  <th
                                    className="px-4 py-2 text-left font-semibold text-white cursor-pointer hover:bg-blue-700 transition-colors"
                                    onClick={() => toggleListingSort('amount')}
                                  >
                                    <div className="flex items-center">
                                      Amount
                                      {listingSort.key==='amount' && (
                                        <span className="ml-1">
                                          {listingSort.direction==='asc'?'â†‘':'â†“'}
                                        </span>
                                      )}
                                    </div>
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                {sortedListings.map((item,i) => (
                                  <tr key={i} className={i%2===0?'bg-blue-50':'bg-blue-100'}>
                                    <td className="px-4 py-2 font-medium">{item.price}</td>
                                    <td className="px-4 py-2">{item.amount}</td>
                                  </tr>
                                ))}
                              </tbody>
                            </table>
                          </div>
                        </td>
                      </tr>
                    )}
                  </React.Fragment>
                );
              })}
            </tbody>
          </table>
        </div>
      );
    };

    const App = () => {
      const [prices, setPrices] = React.useState({});
      const [previousPrices, setPreviousPrices] = React.useState({});
      const [listingsMap, setListingsMap] = React.useState({});
      const [sortConfig, setSortConfig] = React.useState({key:'resource',direction:'asc'});
      const [expandedIds, setExpandedIds] = React.useState(new Set());
      const [isLoading, setIsLoading] = React.useState(false);
      const [errorMsg, setErrorMsg] = React.useState(null);
      const [lastUpdated, setLastUpdated] = React.useState(null);
      const [showAd, setShowAd] = React.useState(false);
      const adTimerRef = React.useRef(null);

      const quantityChartRef = React.useRef(null);
      const listingChartRef  = React.useRef(null);
      const quantityChart    = React.useRef(null);
      const listingChart     = React.useRef(null);

      const RPCS = [
        'https://wax.greymass.com',
        'https://apiwax.cryptolions.io',
        'https://wax.cryptolions.io'
      ];

      const fetchAllRows = async () => {
        let all = [], lb = null;
        while (true) {
          let chunk = null;
          for (const base of RPCS) {
            try {
              const body = { json:true, code:'prospectorsn', scope:'prospectorsn', table:'market', limit:1000 };
              if (lb) body.lower_bound = lb;
              const r = await axios.post(`${base}/v1/chain/get_table_rows`, body, {
                headers:{ 'Content-Type':'application/json' }
              });
              chunk = r.data.rows; break;
            } catch {}
          }
          if (!chunk) throw new Error('All RPCs failed');
          all = all.concat(chunk);
          if (chunk.length < 1000) break;
          lb = chunk[chunk.length-1].id;
        }
        return all;
      };

      const process = rows => {
        const b = {};
        rows.forEach(item => {
          const id = item.stuff.type_id;
          const p  = parseFloat(item.price);
          const a  = parseFloat(item.stuff.amount);
          if (!b[id]) b[id]={ prices:[], min:p, max:p, totalAmount:a };
          else {
            b[id].min = Math.min(b[id].min,p);
            b[id].max = Math.max(b[id].max,p);
            b[id].totalAmount += a;
          }
          b[id].prices.push(p);
        });
        return Object.fromEntries(Object.entries(b).map(([id,o])=>{
          const avg = o.prices.reduce((x,y)=>x+y,0)/o.prices.length;
          return [id,{
            average:+avg.toFixed(2),
            totalAmount:o.totalAmount,
            count:o.prices.length,
            min:+o.min.toFixed(2),
            max:+o.max.toFixed(2)
          }];
        }));
      };

      const buildListingsMap = rows => {
        const m = {};
        rows.forEach(item => {
          const id = item.stuff.type_id;
          const p  = parseFloat(item.price).toFixed(2);
          const a  = parseFloat(item.stuff.amount);
          m[id] = m[id]||[];
          m[id].push({ price:p, amount:a });
        });
        return m;
      };

      const drawPieCharts = () => {
        const labels     = Object.keys(prices).map(id=>RESOURCE_NAMES[id]||id);
        const quantities = Object.values(prices).map(s=>s.totalAmount);
        const counts     = Object.values(prices).map(s=>s.count);
        const palette    = ['#3B82F6','#EF4444','#10B981','#F59E0B','#8B5CF6','#EC4899','#22D3EE','#F472B6','#6366F1','#E879F9','#34D399','#F87171','#4ADE80','#FB923C','#A78BFA','#F9A8D4'];
        if (quantityChart.current) quantityChart.current.destroy();
        if (listingChart.current ) listingChart.current.destroy();
        quantityChart.current = new Chart(quantityChartRef.current.getContext('2d'), {
          type:'doughnut', 
          data:{ 
            labels, 
            datasets:[{ 
              data:quantities, 
              backgroundColor:palette.slice(0,labels.length),
              borderWidth: 1,
              borderColor: '#fff'
            }] 
          },
          options:{ 
            responsive:true, 
            cutout: '60%',
            plugins:{ 
              legend:{ 
                position:'right',
                labels: {
                  padding: 20,
                  usePointStyle: true,
                  pointStyle: 'circle'
                }
              },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    const label = context.label || '';
                    const value = context.raw || 0;
                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                    const percentage = Math.round((value / total) * 100);
                    return `${label}: ${value} (${percentage}%)`;
                  }
                }
              }
            } 
          }
        });
        listingChart.current  = new Chart(listingChartRef.current.getContext('2d'), {
          type:'doughnut', 
          data:{ 
            labels, 
            datasets:[{ 
              data:counts,     
              backgroundColor:palette.slice(0,labels.length).reverse(),
              borderWidth: 1,
              borderColor: '#fff'
            }] 
          },
          options:{ 
            responsive:true, 
            cutout: '60%',
            plugins:{ 
              legend:{ 
                position:'right',
                labels: {
                  padding: 20,
                  usePointStyle: true,
                  pointStyle: 'circle'
                }
              },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    const label = context.label || '';
                    const value = context.raw || 0;
                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                    const percentage = Math.round((value / total) * 100);
                    return `${label}: ${value} (${percentage}%)`;
                  }
                }
              }
            } 
          }
        });
      };

      const fetchData = async () => {
        setIsLoading(true);
        setErrorMsg(null);
        try {
          const rows = await fetchAllRows();
          const proc = process(rows);
          setPrices(proc);
          setListingsMap(buildListingsMap(rows));
          setLastUpdated(new Date());
        } catch(e) {
          setErrorMsg(e.message);
        } finally {
          setIsLoading(false);
        }
      };

      const handleRefresh = () => {
        if (isLoading||showAd) return;
        setShowAd(true);
        adTimerRef.current = setTimeout(()=>{
          setShowAd(false);
          fetchData();
        },3000);
      };

      React.useEffect(fetchData, []);
      React.useEffect(()=>{ if(Object.keys(prices).length) drawPieCharts() },[prices]);

      const sorted = React.useMemo(()=>{
        return Object.entries(prices).sort((a,b)=>{
          let A,B;
          switch(sortConfig.key){
            case 'resource': A=RESOURCE_NAMES[a[0]]; B=RESOURCE_NAMES[b[0]]; break;
            default:         A=a[1][sortConfig.key]; B=b[1][sortConfig.key];
          }
          if(A<B) return sortConfig.direction==='asc'?-1:1;
          if(A>B) return sortConfig.direction==='asc'?1:-1;
          return 0;
        });
      },[prices,sortConfig]);

      const toggleExpand = id => {
        setExpandedIds(prev=>{
          const s=new Set(prev);
          s.has(id)?s.delete(id):s.add(id);
          return s;
        });
      };

      return (
        <div className="container mx-auto p-4 md:p-6 relative animate__animated animate__fadeIn">
          {showAd && (
            <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 animate__animated animate__fadeIn">
              <div className="bg-gradient-to-br from-yellow-200 to-yellow-300 p-8 rounded-2xl shadow-2xl text-center space-y-6 max-w-md w-full border-4 border-yellow-400">
                <div className="text-2xl font-bold text-yellow-800">Advertisement</div>
                <p className="text-lg text-yellow-900">ðŸ”¥ Found this app useful? Consider donating PGL or WAX to: sklam.wam ðŸ”¥</p>
                <div className="flex justify-center space-x-4">
                  <button
                    onClick={()=>{
                      clearTimeout(adTimerRef.current);
                      setShowAd(false);
                      fetchData();
                    }}
                    className="px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-md hover:shadow-lg"
                  >
                    Skip Ad & Refresh
                  </button>
                </div>
                <div className="pt-4 text-sm text-yellow-700">Refreshing in 3 seconds...</div>
              </div>
            </div>
          )}

          <header className="mb-8 text-center">
            <h1 className="text-4xl md:text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600">
              Prospectors Price Tracker
            </h1>
            <p className="text-lg text-gray-600">Grandland Market Analytics</p>
          </header>

          {errorMsg && (
            <div className="mb-6 p-4 bg-red-100 border-l-4 border-red-500 text-red-800 rounded-lg shadow animate__animated animate__shakeX">
              <div className="flex items-center">
                <svg className="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clipRule="evenodd" />
                </svg>
                <span>{errorMsg}</span>
              </div>
            </div>
          )}

          <section className="mb-12 animate__animated animate__fadeIn">
            <div className="flex items-center mb-4">
              <h2 className="text-2xl md:text-3xl font-semibold text-gray-800 flex items-center">
                <svg className="w-6 h-6 mr-2 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
                  <path fillRule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clipRule="evenodd" />
                </svg>
                Market Listings & Prices
              </h2>
            </div>
            {sorted.length
              ? <PriceTable
                  sortedPrices={sorted}
                  onSort={k=>setSortConfig(prev=>({
                    key:k,
                    direction: prev.key===k&&prev.direction==='asc'?'desc':'asc'
                  }))}
                  sortConfig={sortConfig}
                  previousPrices={previousPrices}
                  listingsMap={listingsMap}
                  expandedIds={expandedIds}
                  toggleExpand={toggleExpand}
                />
              : <div className="text-center p-8 bg-white rounded-xl shadow">
                  <svg className="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  <h3 className="mt-2 text-lg font-medium text-gray-900">No data available</h3>
                  <p className="mt-1 text-gray-500">Try refreshing the data or check your connection.</p>
                </div>
            }
          </section>

          <section className="mb-12 animate__animated animate__fadeIn">
            <div className="flex items-center mb-4">
              <h2 className="text-2xl md:text-3xl font-semibold text-gray-800 flex items-center">
                <svg className="w-6 h-6 mr-2 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
                </svg>
                Market Insights
              </h2>
            </div>
            <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 className="text-lg font-medium mb-4 flex items-center">
                  <svg className="w-5 h-5 mr-2 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                    <path fillRule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z" clipRule="evenodd" />
                  </svg>
                  Total Quantity Distribution
                </h3>
                <div className="relative h-80">
                  <canvas ref={quantityChartRef}></canvas>
                </div>
              </div>
              <div className="bg-white p-6 rounded-xl shadow-lg border border-gray-100">
                <h3 className="text-lg font-medium mb-4 flex items-center">
                  <svg className="w-5 h-5 mr-2 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
                  </svg>
                  Listing Count Distribution
                </h3>
                <div className="relative h-80">
                  <canvas ref={listingChartRef}></canvas>
                </div>
              </div>
            </div>
          </section>

          {/* Moved controls into footer area */}
          <section className="mb-8 p-4 bg-white rounded-xl shadow-md">
            <div className="flex flex-col md:flex-row justify-between items-center">
              <div className="flex items-center space-x-4 mb-4 md:mb-0">
                <button
                  onClick={handleRefresh}
                  disabled={isLoading}
                  className={`px-6 py-2 rounded-lg font-medium transition-all shadow-md ${
                    isLoading ? 'bg-gray-400 cursor-not-allowed' : 'bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white'
                  }`}
                >
                  {isLoading ? (
                    <span className="flex items-center">
                      <svg className="animate-spin -ml-1 mr-2 h-4 w-4 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                      </svg>
                      Refreshing...
                    </span>
                  ) : 'Refresh Data'}
                </button>
                {lastUpdated && (
                  <div className="text-sm bg-blue-50 text-blue-800 px-3 py-1 rounded-full flex items-center">
                    <svg className="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                      <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clipRule="evenodd" />
                    </svg>
                    Last updated: {lastUpdated.toLocaleString()}
                  </div>
                )}
              </div>
              <div className="text-sm text-gray-600">
                Showing {Object.keys(prices).length} resources
              </div>
            </div>
          </section>

          <footer className="mt-12 pt-6 border-t border-gray-200 text-center text-gray-500 text-sm">
            <div className="flex justify-center space-x-6 mb-4">
              <a href="#" className="text-gray-500 hover:text-blue-600 transition-colors">
                <span className="sr-only">GitHub</span>
                <svg className="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                  <path fillRule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.910.832.092-.647.35-1.088.636-1.338-2.220-.253-4.555-1.113-4.555-4.951 0-1.093.390-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.650 0 0 .840-.270 2.75 1.026A9.564 9.564 0 0112 6.844c.850.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.100 2.651.640.700 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.920.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.180.580.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clipRule="evenodd" />
                </svg>
              </a>
              <a href="#" className="text-gray-500 hover:text-blue-600 transition-colors">
                <span className="sr-only">Twitter</span>
                <svg className="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.530A8.348 8.348 0 0022 5.920a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.270 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.650 11.650 0 01-8.457-4.287 4.106 4.106 0 001.270 5.477A4.072 4.072 0 012.800 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.070 4.108 4.108 0 003.834 2.850A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.840" />
                </svg>
              </a>
            </div>
            <p className="mb-2">Powered by WAX Blockchain | Deployed on Vercel</p>
            <p className="text-xs text-gray-400">Data refreshes automatically every 5 minutes</p>
          </footer>
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
